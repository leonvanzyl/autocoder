# Configuration Matrix

## Required for backend (Claude)
- `ANTHROPIC_AUTH_TOKEN` **or** Claude CLI auth (`claude login`) to run coding agents.

## Optional / Alternative Models
- `ANTHROPIC_BASE_URL`, `ANTHROPIC_AUTH_TOKEN` — GLM/other Claude-compatible endpoints.
- `ANTHROPIC_DEFAULT_OPUS_MODEL`, `ANTHROPIC_DEFAULT_SONNET_MODEL`, `ANTHROPIC_DEFAULT_HAIKU_MODEL` — model overrides.
- `GEMINI_API_KEY` — use Gemini for assistant chat (chat only, no tools).
- `GEMINI_MODEL` (default `gemini-1.5-flash`), `GEMINI_BASE_URL` (default OpenAI-compatible endpoint).

## Server runtime
- `AUTOCODER_ALLOW_REMOTE` — allow remote CORS (set to `1/true` to relax localhost-only guard).
- `API_TIMEOUT_MS` — passed to Claude SDK.

## Observability
- Backend Sentry: `SENTRY_DSN` (required to enable), optional `SENTRY_ENV`, `SENTRY_TRACES_SAMPLE_RATE` (default 0.2).
- Frontend Sentry: `VITE_SENTRY_DSN` (required to enable), optional `VITE_SENTRY_ENV`, `VITE_SENTRY_TRACES_SAMPLE_RATE`, `VITE_SENTRY_PROMPT_USER=1` to prompt for name/email.
- OTEL: `OTEL_EXPORTER_OTLP_ENDPOINT`, optional `OTEL_SERVICE_NAME` (default `autocoder-server`), `OTEL_ENVIRONMENT` (default `production`).

## Deploy (Traefik/DuckDNS)
- `.env.deploy` generated by `scripts/deploy.sh`:
  - `DOMAIN`
  - `LETSENCRYPT_EMAIL`
  - `APP_PORT` (internal service port, default 8888)
- DuckDNS token stored in `/etc/cron.d/duckdns` (not in repo).

## UI build/dev
- `VITE_API_PORT` — backend port for Vite dev proxy (default 8888).

## Data / volumes
- `~/.autocoder` persisted via `autocoder-data` volume (docker-compose).

## Make targets
- `make dev-up`: uses `docker-compose.dev.yml` (hot reload).
- `make api-dev`, `make ui-dev`, `make lint`, `make smoke`, `make pre-commit-install`.
